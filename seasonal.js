var monthData = {
	January: {
		// frost blue
		apples: true,
		apricots: false,
		blackberries: false,
		blueberries: false,
		cantaloupe: false,
		cherries: false,
		clementines: true,
		grapefruit: true,
		grapes: false,
		honeydew: false,
		kiwi: true,
		mangos: true,
		oranges: true,
		peaches: false,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: false,
		strawberries: false,
		watermelon: false,
		color: '#76D4D4'
	},
	February: {
		// purple
		apples: true,
		apricots: false,
		blackberries: false,
		blueberries: false,
		cantaloupe: false,
		cherries: false,
		clementines: true,
		grapefruit: true,
		grapes: false,
		honeydew: false,
		kiwi: true,
		mangos: true,
		oranges: true,
		peaches: false,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: false,
		strawberries: false,
		watermelon: false,
		color: '#7A378B'
	},
	March: {
		// emerald green
		apples: true,
		apricots: true,
		blackberries: false,
		blueberries: false,
		cantaloupe: false,
		cherries: false,
		clementines: false,
		grapefruit: true,
		grapes: false,
		honeydew: false,
		kiwi: false,
		mangos: true,
		oranges: true,
		peaches: false,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: false,
		strawberries: false,
		watermelon: false,
		color: '#2ecc71'
	},
	April: {
		// alizarin - kinda salmon?
		apples: false,
		apricots: true,
		blackberries: false,
		blueberries: false,
		cantaloupe: false,
		cherries: false,
		clementines: false,
		grapefruit: true,
		grapes: false,
		honeydew: false,
		kiwi: false,
		mangos: true,
		oranges: true,
		peaches: false,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: false,
		strawberries: true,
		watermelon: false,
		color: '#e74c3c'
	},
	May: {
		// happy yellow.
		apples: false,
		apricots: true,
		blackberries: true,
		blueberries: true,
		cantaloupe: true,
		cherries: false,
		clementines: false,
		grapefruit: false,
		grapes: false,
		honeydew: true,
		kiwi: false,
		mangos: true,
		oranges: false,
		peaches: false,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: true,
		strawberries: true,
		watermelon: true,
		color: '#f1c40f'
	},
	June: {
		// blue
		apples: false,
		apricots: true,
		blackberries: true,
		blueberries: true,
		cantaloupe: true,
		cherries: true,
		clementines: false,
		grapefruit: false,
		grapes: true,
		honeydew: true,
		kiwi: true,
		mangos: true,
		oranges: false,
		peaches: false,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: true,
		strawberries: true,
		watermelon: true,
		color: '#3498db'
	},
	July: {
		// pomegranate red
		apples: false,
		apricots: true,
		blackberries: true,
		blueberries: true,
		cantaloupe: true,
		cherries: true,
		clementines: false,
		grapefruit: false,
		grapes: true,
		honeydew: true,
		kiwi: true,
		mangos: true,
		oranges: false,
		peaches: true,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: true,
		strawberries: false,
		watermelon: true,
		color: '#BD2D2F'
	},
	August: {
		// deep green
		apples: true,
		apricots: true,
		blackberries: false,
		blueberries: false,
		cantaloupe: false,
		cherries: false,
		clementines: false,
		grapefruit: false,
		grapes: true,
		honeydew: false,
		kiwi: true,
		mangos: true,
		oranges: false,
		peaches: true,
		pears: false,
		pineapple: true,
		pomegranates: false,
		raspberries: true,
		strawberries: false,
		watermelon: true,
		color: '#004F16'
	},
	September: {
		// pleasant blue
		apples: true,
		apricots: false,
		blackberries: false,
		blueberries: false,
		cantaloupe: false,
		cherries: false,
		clementines: false,
		grapefruit: false,
		grapes: true,
		honeydew: false,
		kiwi: false,
		mangos: true,
		oranges: false,
		peaches: false,
		pears: true,
		pineapple: true,
		pomegranates: false,
		raspberries: false,
		strawberries: false,
		watermelon: false,
		color: '#1D5E7C'
	},
	October: {
		// orange
		apples: true,
		apricots: false,
		blackberries: false,
		blueberries: false,
		cantaloupe: true,
		cherries: false,
		clementines: false,
		grapefruit: true,
		grapes: true,
		honeydew: true,
		kiwi: false,
		mangos: true,
		oranges: true,
		peaches: false,
		pears: true,
		pineapple: true,
		pomegranates: true,
		raspberries: false,
		strawberries: false,
		watermelon: false,
		color: '#FF870F'
	},
	November: {
		// brown
		apples: true,
		apricots: false,
		blackberries: false,
		blueberries: false,
		cantaloupe: true,
		cherries: false,
		clementines: true,
		grapefruit: true,
		grapes: true,
		honeydew: true,
		kiwi: false,
		mangos: true,
		oranges: true,
		peaches: false,
		pears: true,
		pineapple: true,
		pomegranates: true,
		raspberries: false,
		strawberries: false,
		watermelon: false,
		color: '#AA6422'
	},
	December: {
		// gray
		apples: true,
		apricots: false,
		blackberries: false,
		blueberries: false,
		cantaloupe: false,
		cherries: false,
		clementines: true,
		grapefruit: true,
		grapes: false,
		honeydew: false,
		kiwi: true,
		mangos: true,
		oranges: true,
		peaches: false,
		pears: false,
		pineapple: true,
		pomegranates: true,
		raspberries: false,
		strawberries: false,
		watermelon: false,
		color: '#77878B'
	}
};

var fruitData = {
  'apples': {
    gold: 'firm, no signs of decay or bruising, smooth skin.',
		tip: 'The variety "Honeycrisp" is an especially delicious apple.',
		ripens: 'Yes',
		img: 'images/apple.jpg',
		vid: '',
		health: '<a href="http://www.medicalnewstoday.com/articles/267290.php" target="_blank">may reduce inflammation, improve neurological health, and lower cholesterol</a>'
  },
	'apricots': {
		gold: 'orange-gold color with hints of redness, smooth skin, around the size of a golf ball, yields to gentle pressure.',
		tip: 'If a little unripe, store in a paper bag to trap the ethylene gas (which is what helps induce the ripening).',
		ripens: 'Yes',
		img: 'images/apricot.jpg',
		vid: '',
		health: '<a href="http://www.whfoods.com/genpage.php?tname=foodspice&dbid=3" target="_blank">may reduce inflammation, protect eyesight, lower blood pressure, and support digestive health</a>'
	},
	'blackberries': {
		gold: 'deeply colored with no hull attached (a sign of premature picking), plump and firm, no mold or stains.',
		tip: 'Remove smashed berries, which will cause others to go bad faster. Taste one if possible.',
		ripens: 'No',
		img: 'images/blackberry.jpg',
		vid: '',
		health: '<a href="https://www.organicfacts.net/health-benefits/fruit/blackberries.html" target="_blank">may help with digestion, strengthen the immune system, enhance memory, and be beneficial during pregnancy</a>'
	},
	'blueberries': {
		gold: 'a slight frosty-white hue, dry and plump, no mold or stains.',
		tip: 'Remove smashed berries, which will cause others to go bad faster. Taste one if possible.',
		ripens: 'No',
		img: 'images/blueberry.jpg',
		vid: '',
		health: '<a href="http://www.whfoods.com/genpage.php?tname=foodspice&dbid=8" target="_blank">may improve memory, prevent neurodegenerative diseases, prevent cancer, reduce blood pressure, and reduce inflammation</a>'
	},
	'cantaloupe': {
		gold: 'little to no defects, the rind underneath the net-like texture is golden or orange in color, heavy for its size.',
		tip: 'Push on the round section where the vine was attached - it should be slightly soft and should smell fresh and fragrant with a hint of sweetness.',
		ripens: 'Yes',
		img: 'images/cantaloupe.jpg',
		vid: 'https://www.youtube.com/watch?v=gpJOV4EzObg',
		health: '<a href="http://www.medicalnewstoday.com/articles/279176.php" target="_blank">may aid in eye health, reduce risk of asthma, prevent dehydration, and help maintain optimal skin and hair</a>'
	},
	'cherries': {
		gold: '</br>Sweet red cherries: deep colored, plump, if the stem is intact it’s bright green. </br></br> Rainier cherries: reddish-yellow, red or pink blush or brown flecks (which are indicators of sun exposure – sugar accumulation), naturally less firm than red cherries.',
		tip: '	Taste one if possible.',
		ripens: 'No',
		img: 'images/rainiercherry.jpg',
		vid: '',
		health: '<a href="http://www.medicaldaily.com/cherry-health-benefits-6-reasons-why-you-should-eat-more-cherries-246713" target="_blank">may help with arthritis and inflammatory conditions, lower blood sugar in diabetics, prevent heart disease, and aid in sleep</a>'
	},
	'clementines': {
		gold: 'strong citrus smell, moist, supple skin, heavy for its size.',
		tip: '',
		ripens: 'No',
		img: 'images/clementine.jpg',
		vid: '',
		health: '<a href="https://www.organicfacts.net/health-benefits/fruit/clementines.html" target="_blank">may relieve digestive troubles, strengthen immune system, and help maintain optimum balance of electrolytes</a>'
	},
	'grapefruit': {
		gold: 'heavy for its size, yields to gentle pressure, fairly smooth, thin rind, slightly reddish in color.',
		tip: '',
		ripens: 'No',
		img: 'images/grapefruit.jpg',
		vid: 'https://www.youtube.com/watch?v=1tbf9fGAC10',
		health: '<a href="http://www.medicalnewstoday.com/articles/280882.php" target="_blank">may help with weight loss, improve insulin resistance, prevent stroke, and prevent kidney stones</a>'
	},
	'grapes': {
		gold: 'firm, plump, and firmly attached to the stems. Stems are green and flexible (not dry and brittle).  Might have a powdery-white coating (an edible, naturally occurring substance that protects grapes from moisture loss and decay).',
		tip: 'Watch out for wet, moldy, or shriveled grapes as these signs indicate decay. Taste one if possible.',
		ripens: 'No',
		img: 'images/grape.jpg',
		vid: '',
		health: '<a href="http://www.medicalnewstoday.com/articles/271156.php" target="_blank">may help relieve constipation, help clear up acne, alleviate symptoms of allergies, and alleviate symptoms of menopause</a>'
	},
	'honeydew': {
		gold: 'little to no defects, pale yellow to light lemon in color, not overly green, a dull looking appearance (a shiny outside is an indicator of an under-ripe melon), heavy for its size.',
		tip: 'Push on the round section where the vine was attached - it should be slightly soft and should smell fresh and fragrant with a hint of sweetness.',
		ripens: 'Yes',
		img: 'images/honeydew.jpg',
		vid: 'https://www.youtube.com/watch?v=gpJOV4EzObg',
		health: '<a href="http://doctormurray.com/healing-facts-honeydew-melons/" target="_blank">may lower blood pressure, promote healthy skin, and prevent dehydration</a>'
	},
	'kiwi': {
		gold: 'plump, fragrant, yields to gentle pressure, skin is brown and fuzzy.',
		tip: 'Watch out for bruises, dark spots, mold, or wrinkles (signs that the fruit is overripe). Size doesn’t matter.',
		ripens: 'Yes',
		img: 'images/kiwi.jpg',
		vid: 'https://www.youtube.com/watch?v=i4zq-OidaU4',
    health: '<a href="http://www.whfoods.com/genpage.php?dbid=41&tname=foodspice" target="_blank">may prevent inflammation and cancer, boost the immune system, promote colon health, and protect against asthma</a>'
	},
	'mangos': {
		gold: 'yields to gentle pressure, similar feel to a ripe avocado, fruity aroma around the stem.',
		tip: 'Don’t worry about color.',
		ripens: 'Yes',
		img: 'images/mango.jpg',
		vid: 'https://www.youtube.com/watch?v=0OsP1icacOY',
		health: '<a href="http://www.medicalnewstoday.com/articles/275921.php" target="_blank">may boost immune system, prevent prostate cancer, strengthen bones, and promote skin and hair health</a>'
	},
	'oranges': {
		gold: 'heavier than it appears, yields to gentle pressure, fairly smooth, thin rind.',
		tip: 'Watch out for mold.',
		ripens: 'No',
		img: 'images/orange.jpg',
		vid: '',
		health: '<a href="http://www.whfoods.com/genpage.php?tname=foodspice&dbid=37" target="_blank">may support immune system, lower cholesterol, aid in digestion, prevent kidney stones, prevent ulcers, reduce risk of stomach cancer, and prevent rheumatoid arthritis</a>'
	},
	'peaches': {
		gold: 'vibrant tones and colors (no green), yields to gentle pressure.',
		tip: 'Fragrance isn’t the best indication. Try to buy local peaches (peaches don’t hold up well when moved around, so they’re often picked before they’re ripe for exporting).',
		ripens: 'Yes',
		img: 'images/peach.jpg',
		vid: '',
		health: '<a href="http://www.medicalnewstoday.com/articles/274620.php" target="_blank">may promote heart and eye and skin health, prevent cancer, and prevent obesity</a>'
	},
	'pears': {
		gold: 'yields to gentle pressure only at the top of the pear just where the stem joins the fruit.',
		tip: '',
		ripens: 'Yes',
		img: 'images/pear.jpg',
		vid: '',
		health: '<a href="http://www.whfoods.com/genpage.php?tname=foodspice&dbid=28" target="_blank">may reduce inflammation and oxidization, help treat diverticulitis, aid in weight loss, help with detox, and improve insulin resistance</a>'
	},
	'pineapple': {
		gold: 'the bottom of the fruit smells sweet, yellow-golden color, yields to gentle pressure.',
		tip: '',
		ripens: 'No',
		img: 'images/pineapple.jpg',
		vid: 'https://www.youtube.com/watch?v=IH7nfHbfHBY',
		health: '<a href="http://www.whfoods.com/genpage.php?tname=foodspice&dbid=34" target="_blank">may reduce inflammation, aid in digestion, promote eye health, boost energy, and support the immmune system</a>'
	},
	'pomegranates': {
		gold: 'heavy for its size, flattened, angular sides, smooth soft skin – soft enough to scratch.',
		tip: '',
		ripens: 'No',
		img: 'images/pomegranate.jpg',
		vid: 'https://www.youtube.com/watch?v=ZDIxKjwx9w4',
		health: '<a href="http://www.medicaldaily.com/pomegranate-health-benefits-fruit-helps-protect-against-plaque-hunger-and-certain-340020" target="_blank">may protect against kidney diseases, help curb hunger, prevent Alzheimer' + "'" + 's, protect against plaque, and defend against cancer</a>'
	},
	'raspberries': {
		gold: 'brightly colored.',
		tip: 'Remove smashed berries, which will cause others to go bad faster. Taste one if possible.',
		ripens: 'No',
		img: 'images/raspberry.jpg',
		vid: '',
		health: '<a href="http://www.whfoods.com/genpage.php?tname=foodspice&dbid=39" target="_blank">may help prevent inflammation, and decrease risk of obesity, type 2 diabetes, and cancer</a>'
	},
	'strawberries': {
		gold: 'clean, dry, plump, firm, and fully red, green caps.	',
		tip: 'Avoid bruised or wrinkled berries. Taste one if possible.',
		ripens: 'No',
		img: 'images/strawberry.jpg',
		vid: '',
		health: '<a href="http://www.medicalnewstoday.com/articles/271285.php" target="_blank">may help prevent heart disease, stroke, depression, constipation, high blood pressure, and cancer</a>'
	},
	'watermelon': {
		gold: 'heavy for its size, yellow field spot, dull looking appearance (a shiny outside is an indicator of an under-ripe melon).',
		tip: 'Tap the melon with the palm of your hand: if it makes a hollow sound, it’s likely good.',
		ripens: 'No',
		img: 'images/watermelon.jpg',
		vid: 'https://www.youtube.com/watch?v=80BZGvnNZOc',
		health: '<a href="http://www.medicalnewstoday.com/articles/266886.php" target="_blank">may help promote blood flow and digestion, relax muscles, prevent obesity and dehydration and muscle soreness</a>'
	},
};

var d = new Date();
var months = Object.getOwnPropertyNames(monthData);
var month = months[d.getMonth()];

// fix colors: february, august, october, november, december

jQuery(function ($) {
var App = {
	fruits: [],
	formatDate: function() {
		document.getElementById('date').innerHTML = month + ' ' + d.getFullYear();
	},
	changeBackgroundColor: function() {
		document.body.style.backgroundColor = monthData[month].color;
	},
	filterFruitList: function() {
		this.fruits = [];
		var fruitsList = Object.getOwnPropertyNames(fruitData);
		var numberOfFruits =  Object.keys(fruitData).length;
		
	  for (var i = 0; i < numberOfFruits; i++) {
	    var fruit = fruitsList[i];
	    if (monthData[month][fruit] === true) {
			  this.fruits.push(fruit);
		  } 
	  }
	},
	renderFruitList: function() {
		$('#fruits').remove();
		$('h4').after('<ul id="fruits"></ul>');
    var months = Object.getOwnPropertyNames(monthData);
    
		for (var i = 0; i < this.fruits.length; i++) {
		  var fruit = App.fruits[i];
		  

			$('#fruits').append('<li id="' + i + '">' + fruit + ' <span>▾</span></li>');
		  $('#' + i).append('<div class="data" style="display: none"></div>');
		  
		  var fruitInfo = $('#' + i + ' div');
		  
		  fruitInfo.append('<img src="' + fruitData[fruit].img + '" alt="a picture of ' + fruit + '.">')
		           .append('<p><strong>The Gold Standard:</strong> ' + fruitData[fruit].gold + '</p>');
		  
		  if (fruitData[fruit].tip) {
		    fruitInfo.append('<p><strong>Tip:</strong> ' + fruitData[fruit].tip + '</p>');
		  }
		  
		  fruitInfo.append('<p><strong>Ripens after picked?</strong> ' + fruitData[fruit].ripens + '</p>')
		           .append('<p class="dynamicMonths" id=' + (i+100) + '><strong>Months in season: </strong></p>');
		           
		  if (fruitData[fruit].vid) {
		    fruitInfo.append('<p><strong>How to Prepare: </strong>Click <a href="' + fruitData[fruit].vid + '" target="_blank">HERE</a> to watch a video</p>');
		  }
		  
		  fruitInfo.append('<p><strong>Reasons to eat more ' + fruit + ': </strong>' + fruitData[fruit].health + ' (click link for more info)');

		  // consider redoing how the months in season works maybe using filter?
		  // should month data actually be in terms of fruit? "kiwi: january true, freburary false" etc?
		  
		  monthsInSeason = [];

		  for (var j = 0; j < months.length; j++) {
  		  month = months[j];
  		  if ( monthData[month][fruit] === true ) {
  		    monthsInSeason.push(month);
  		  }
		  }  
		  
  		$('#' + (i+100)).append(monthsInSeason.join(', '));
  		
		}
	},
	toggleFruitData: function() {
  	 $(document).ready(function() {
        $("ul").off();
        $("ul").on('click', 'li', function(e) {
          $(this).children('div').slideToggle('slow');
          $(this).siblings().slideToggle('slow');
          $('html, body').animate({
            scrollTop: $('li').first().offset().top
          }, 'slow');
        });
  	 });
	},
	changeMonth: function() {
		$('.nav').on('click', 'div', function(e) {
			month = e.target.id;
			this.toggleFruitData();
			this.formatDate();
			this.changeBackgroundColor();
			this.filterFruitList();
			this.renderFruitList();
		}.bind(this));
	},
	init: function() {
		this.formatDate();
		this.changeMonth();
		this.changeBackgroundColor();
		this.filterFruitList();
		this.renderFruitList();
		this.toggleFruitData();
	}
};

App.init();
});